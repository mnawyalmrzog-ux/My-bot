import discord
from discord.ext import commands
from discord import app_commands
from typing import Optional, Literal, Union
import json, os, asyncio, datetime, random, aiohttp
from groq import Groq

# --- [ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ] ---
TOKEN = "MTQ3Mzc0OTgxNzg2NzEwODQyMw.GJlHSX.b4Z0yA2Hk_7wFRP9dSduK0z6oYWdGSq86HkI_A"
GROQ_KEY = "Gsk_k0hbTTHzM5aX6YWUdnnCWGdyb3FYYucZA9KAZj7dc8Us5QiPlNf3"
OWNER_ID = 1413257808601682100

groq_client = Groq(api_key=GROQ_KEY)

class LiveZoneMega(commands.Bot):
    def __init__(self):
        intents = discord.Intents.all()
        super().__init__(command_prefix="!", intents=intents)
        self.db_path = "livezone_mega_db.json"
        # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ´Ù…Ù„ Ø§Ù„Ø±ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù„Ù„Ø°ÙƒØ§Ø¡
        self.db = {"users": {}, "guilds": {}, "responses": {}, "tickets": [], "warns": {}, "ai_rooms": []}

    def load_db(self):
        if os.path.exists(self.db_path):
            try:
                with open(self.db_path, "r") as f:
                    data = json.load(f)
                    for key in data: self.db[key] = data[key]
            except: pass

    def save_db(self):
        with open(self.db_path, "w") as f: json.dump(self.db, f, indent=4)

    async def setup_hook(self):
        self.load_db()
        await self.tree.sync()

bot = LiveZoneMega()

def get_u(uid):
    uid = str(uid)
    if uid not in bot.db["users"]: 
        bot.db["users"][uid] = {"pocket": 1000, "bank": 0, "inv": [], "last_work": 0}
    return bot.db["users"][uid]

def is_boss(it: discord.Interaction):
    return it.user.id == OWNER_ID or it.user.guild_permissions.administrator

# --- [ ğŸ¤– Ø£ÙˆØ§Ù…Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ] ---

@bot.tree.command(name="ØªØ­Ø¯ÙŠØ¯_Ø±ÙˆÙ…_Ø§Ù„Ø°ÙƒØ§Ø¡", description="ØªØ­Ø¯ÙŠØ¯ Ø±ÙˆÙ… Ù„Ù„Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ")
async def set_ai_room(it: discord.Interaction, channel: discord.TextChannel):
    if not is_boss(it): return
    if "ai_rooms" not in bot.db: bot.db["ai_rooms"] = []
    if channel.id not in bot.db["ai_rooms"]:
        bot.db["ai_rooms"].append(channel.id)
        bot.save_db()
        await it.response.send_message(f"âœ… ØªÙ…! Ø£ÙŠ Ø±Ø³Ø§Ù„Ø© ÙÙŠ {channel.mention} Ø³ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.")
    else:
        await it.response.send_message("âš ï¸ Ø§Ù„Ø±ÙˆÙ… Ù…Ø­Ø¯Ø¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹.")

@bot.tree.command(name="Ø§Ù„ØºØ§Ø¡_Ø±ÙˆÙ…_Ø§Ù„Ø°ÙƒØ§Ø¡", description="Ø¥Ù„ØºØ§Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ù…Ù† Ø±ÙˆÙ… Ù…Ø¹ÙŠÙ†")
async def unset_ai_room(it: discord.Interaction, channel: discord.TextChannel):
    if not is_boss(it): return
    if channel.id in bot.db.get("ai_rooms", []):
        bot.db["ai_rooms"].remove(channel.id)
        bot.save_db()
        await it.response.send_message(f"âŒ ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ù…Ù† {channel.mention}.")
    else:
        await it.response.send_message("âš ï¸ Ø§Ù„Ø±ÙˆÙ… ØºÙŠØ± Ù…ÙØ¹Ù„ ÙÙŠÙ‡ Ø§Ù„Ù†Ø¸Ø§Ù….")

# --- [ ğŸ›¡ï¸ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (33 Ø£Ù…Ø±) ] ---

@bot.tree.command(name="Ù‚ÙÙ„", description="1. Ù‚ÙÙ„ Ø§Ù„Ø±ÙˆÙ…")
async def lock(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.set_permissions(it.guild.default_role, send_messages=False)
    await it.response.send_message("ğŸ”’ ØªÙ… Ù‚ÙÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©.")

@bot.tree.command(name="ÙØªØ­", description="2. ÙØªØ­ Ø§Ù„Ø±ÙˆÙ…")
async def unlock(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.set_permissions(it.guild.default_role, send_messages=True)
    await it.response.send_message("ğŸ”“ ØªÙ… ÙØªØ­ Ø§Ù„Ù‚Ù†Ø§Ø©.")

@bot.tree.command(name="Ù…Ø³Ø­", description="3. Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„")
async def clear(it: discord.Interaction, count: int):
    if not is_boss(it): return
    await it.channel.purge(limit=count)
    await it.response.send_message(f"âœ… ØªÙ… Ù…Ø³Ø­ {count} Ø±Ø³Ø§Ù„Ø©.", ephemeral=True)

@bot.tree.command(name="Ø·Ø±Ø¯", description="4. Ø·Ø±Ø¯ Ø¹Ø¶Ùˆ")
async def kick(it: discord.Interaction, user: discord.Member):
    if not is_boss(it): return
    await user.kick()
    await it.response.send_message(f"ğŸ‘ Ø·Ø±Ø¯Ù†Ø§ {user.mention}")

@bot.tree.command(name="Ø¨Ø§Ù†Ø¯", description="5. Ø­Ø¸Ø± Ø¹Ø¶Ùˆ")
async def ban(it: discord.Interaction, user: discord.Member):
    if not is_boss(it): return
    await user.ban()
    await it.response.send_message(f"ğŸš« Ø­Ø¸Ø±Ù†Ø§ {user.mention}")

@bot.tree.command(name="ÙÙƒ_Ø¨Ø§Ù†Ø¯", description="6. ÙÙƒ Ø­Ø¸Ø±")
async def unban(it: discord.Interaction, user_id: str):
    if not is_boss(it): return
    user = await bot.fetch_user(int(user_id))
    await it.guild.unban(user)
    await it.response.send_message(f"âœ… ÙÙƒÙŠÙ†Ø§ Ø§Ù„Ø­Ø¸Ø± Ø¹Ù† {user.name}")

@bot.tree.command(name="Ø§Ø³ÙƒØª", description="7. ØªØ§ÙŠÙ… Ø£ÙˆØª")
async def mute(it: discord.Interaction, user: discord.Member, minutes: int):
    if not is_boss(it): return
    await user.timeout(datetime.timedelta(minutes=minutes))
    await it.response.send_message(f"ğŸ”‡ Ø³ÙƒØªÙ†Ø§Ù‡ {minutes} Ø¯Ù‚ÙŠÙ‚Ø©.")

@bot.tree.command(name="ØªØ­Ø¯Ø«", description="8. ÙÙƒ ØªØ§ÙŠÙ… Ø£ÙˆØª")
async def unmute(it: discord.Interaction, user: discord.Member):
    if not is_boss(it): return
    await user.timeout(None)
    await it.response.send_message(f"ğŸ”Š Ø®Ù„ÙˆÙ‡ ÙŠØªÙƒÙ„Ù… {user.mention}")

@bot.tree.command(name="ØªØ­Ø°ÙŠØ±", description="9. ØªØ­Ø°ÙŠØ± Ø¹Ø¶Ùˆ")
async def warn(it: discord.Interaction, user: discord.Member):
    if not is_boss(it): return
    uid = str(user.id)
    bot.db["warns"][uid] = bot.db["warns"].get(uid, 0) + 1
    bot.save_db()
    await it.response.send_message(f"âš ï¸ ØªØ­Ø°ÙŠØ± Ù„Ù€ {user.mention} (Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {bot.db['warns'][uid]})")

@bot.tree.command(name="Ø­Ø°Ù_ØªØ­Ø°ÙŠØ±", description="10. ØªØµÙÙŠØ± Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª")
async def clear_warns(it: discord.Interaction, user: discord.Member):
    if not is_boss(it): return
    bot.db["warns"][str(user.id)] = 0
    bot.save_db()
    await it.response.send_message(f"âœ… ØµÙØ±Ù†Ø§ ØªØ­Ø°ÙŠØ±Ø§Øª {user.mention}")

@bot.tree.command(name="ØªØ­Ø°ÙŠØ±Ø§Øª", description="11. Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª")
async def show_warns(it: discord.Interaction, user: discord.Member):
    w = bot.db["warns"].get(str(user.id), 0)
    await it.response.send_message(f"ğŸ“‹ {user.name} Ø¹Ù†Ø¯Ù‡ `{w}` ØªØ­Ø°ÙŠØ±Ø§Øª.")

@bot.tree.command(name="ØªØ«Ø¨ÙŠØª", description="12. ØªØ«Ø¨ÙŠØª Ø±Ø³Ø§Ù„Ø©")
async def pin(it: discord.Interaction, msg_id: str):
    if not is_boss(it): return
    msg = await it.channel.fetch_message(int(msg_id))
    await msg.pin()
    await it.response.send_message("ğŸ“Œ Ø«Ø¨ØªÙ†Ø§ Ø§Ù„Ø±Ø³Ø§Ù„Ø©.")

@bot.tree.command(name="Ø§Ù„ØºØ§Ø¡_ØªØ«Ø¨ÙŠØª", description="13. ÙÙƒ Ø§Ù„ØªØ«Ø¨ÙŠØª")
async def unpin(it: discord.Interaction, msg_id: str):
    if not is_boss(it): return
    msg = await it.channel.fetch_message(int(msg_id))
    await msg.unpin()
    await it.response.send_message("ğŸ”“ Ù„ØºÙŠÙ†Ø§ Ø§Ù„ØªØ«Ø¨ÙŠØª.")

@bot.tree.command(name="Ø±ØªØ¨Ø©", description="14. Ø¥Ø¹Ø·Ø§Ø¡ Ø±ØªØ¨Ø©")
async def add_role(it: discord.Interaction, user: discord.Member, role: discord.Role):
    if not is_boss(it): return
    await user.add_roles(role)
    await it.response.send_message(f"âœ… Ø¹Ø·ÙŠÙ†Ø§Ù‡ Ø±ØªØ¨Ø© {role.name}")

@bot.tree.command(name="Ø³Ø­Ø¨_Ø±ØªØ¨Ø©", description="15. Ø³Ø­Ø¨ Ø±ØªØ¨Ø©")
async def rem_role(it: discord.Interaction, user: discord.Member, role: discord.Role):
    if not is_boss(it): return
    await user.remove_roles(role)
    await it.response.send_message(f"âŒ Ø³Ø­Ø¨Ù†Ø§ Ø±ØªØ¨Ø© {role.name}")

@bot.tree.command(name="ØªØºÙŠÙŠØ±_Ù„Ù‚Ø¨", description="16. ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ùƒ Ù†ÙŠÙ…")
async def nick(it: discord.Interaction, user: discord.Member, name: str):
    if not is_boss(it): return
    await user.edit(nick=name)
    await it.response.send_message(f"ğŸ“ ØµØ§Ø± Ø§Ø³Ù…Ù‡ {name}")

@bot.tree.command(name="Ø§Ù†Ø´Ø§Ø¡_Ø±ÙˆÙ…", description="17. Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ù†Ø§Ø©")
async def mkch(it: discord.Interaction, name: str):
    if not is_boss(it): return
    await it.guild.create_text_channel(name)
    await it.response.send_message(f"âœ… Ø³ÙˆÙŠÙ†Ø§ Ø±ÙˆÙ… {name}")

@bot.tree.command(name="Ø­Ø°Ù_Ø±ÙˆÙ…", description="18. Ø­Ø°Ù Ù‚Ù†Ø§Ø©")
async def rmch(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.delete()

@bot.tree.command(name="Ø§Ù†Ø´Ø§Ø¡_Ø±ØªØ¨Ø©", description="19. Ø¥Ù†Ø´Ø§Ø¡ Ø±ØªØ¨Ø©")
async def mkrole(it: discord.Interaction, name: str):
    if not is_boss(it): return
    await it.guild.create_role(name=name)
    await it.response.send_message(f"âœ… Ø³ÙˆÙŠÙ†Ø§ Ø±ØªØ¨Ø© {name}")

@bot.tree.command(name="Ø­Ø°Ù_Ø±ØªØ¨Ø©", description="20. Ø­Ø°Ù Ø±ØªØ¨Ø©")
async def rmrole(it: discord.Interaction, role: discord.Role):
    if not is_boss(it): return
    await role.delete()
    await it.response.send_message(f"ğŸ—‘ï¸ Ø­Ø°ÙÙ†Ø§ Ø±ØªØ¨Ø© {role.name}")

@bot.tree.command(name="Ø§Ø®ÙØ§Ø¡_Ø±ÙˆÙ…", description="21. Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±ÙˆÙ…")
async def hide(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.set_permissions(it.guild.default_role, view_channel=False)
    await it.response.send_message("ğŸ‘» Ø§Ù„Ø±ÙˆÙ… Ø§Ø®ØªÙÙ‰!")

@bot.tree.command(name="Ø§Ø¸Ù‡Ø§Ø±_Ø±ÙˆÙ…", description="22. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±ÙˆÙ…")
async def show(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.set_permissions(it.guild.default_role, view_channel=True)
    await it.response.send_message("ğŸ‘ï¸ Ø§Ù„Ø±ÙˆÙ… Ø¸Ù‡Ø±!")

@bot.tree.command(name="Ø³Ø­Ø¨_Ø§Ù„ÙƒÙ„", description="23. Ø³Ø­Ø¨ Ù„Ù„ÙÙˆÙŠØ³")
async def pull(it: discord.Interaction):
    if not is_boss(it) or not it.user.voice: return
    for m in it.guild.members:
        if m.voice: await m.move_to(it.user.voice.channel)
    await it.response.send_message("ğŸŒªï¸ Ø³Ø­Ø¨Ù†Ø§ Ø§Ù„ÙƒÙ„!")

@bot.tree.command(name="Ø§Ø³ÙƒØ§Øª_ØµÙˆØªÙŠ", description="24. Ù…ÙŠÙˆØª ÙÙˆÙŠØ³ Ù„Ù„ÙƒÙ„")
async def vmute(it: discord.Interaction):
    if not is_boss(it) or not it.user.voice: return
    for m in it.user.voice.channel.members: await m.edit(mute=True)
    await it.response.send_message("ğŸ¤ Ø³ÙƒØªÙ†Ø§ Ø§Ù„ÙÙˆÙŠØ³!")

@bot.tree.command(name="ØªØ­Ø¯Ø«_ØµÙˆØªÙŠ", description="25. ÙÙƒ Ù…ÙŠÙˆØª Ø§Ù„ÙÙˆÙŠØ³")
async def vunmute(it: discord.Interaction):
    if not is_boss(it) or not it.user.voice: return
    for m in it.user.voice.channel.members: await m.edit(mute=False)
    await it.response.send_message("ğŸ—£ï¸ ØªÙƒÙ„Ù…ÙˆØ§!")

@bot.tree.command(name="ÙÙƒ_Ø§Ù„Ù‚ÙŠÙˆØ¯", description="26. ØªØµÙÙŠØ± Ø§Ù„Ø±ÙˆÙ…")
async def reset(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.edit(sync_permissions=True)
    await it.response.send_message("ğŸ”“ ØµÙØ±Ù†Ø§ Ø§Ù„Ø±ÙˆÙ…!")

@bot.tree.command(name="ØªØºÙŠÙŠØ±_Ø§Ø³Ù…_Ø§Ù„Ø³ÙŠØ±ÙØ±", description="27. Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ±")
async def sname(it: discord.Interaction, name: str):
    if not is_boss(it): return
    await it.guild.edit(name=name)
    await it.response.send_message("âœ… ØºÙŠØ±Ù†Ø§ Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ±")

@bot.tree.command(name="ØªØºÙŠÙŠØ±_ØµÙˆØ±Ø©_Ø§Ù„Ø³ÙŠØ±ÙØ±", description="28. ØµÙˆØ±Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±")
async def sicon(it: discord.Interaction, url: str):
    if not is_boss(it): return
    async with aiohttp.ClientSession() as s:
        async with s.get(url) as r: await it.guild.edit(icon=await r.read())
    await it.response.send_message("ğŸ“¸ ØºÙŠØ±Ù†Ø§ Ø§Ù„ØµÙˆØ±Ø©")

@bot.tree.command(name="ÙˆØ¶Ø¹_Ø§Ù„Ø¨Ø·Ø¡", description="29. Ø³Ù„Ùˆ Ù…ÙˆØ¯")
async def slow(it: discord.Interaction, sec: int):
    if not is_boss(it): return
    await it.channel.edit(slowmode_delay=sec)
    await it.response.send_message(f"â³ Ø§Ù„Ø¨Ø·Ø¡: {sec} Ø«Ø§Ù†ÙŠØ©")

@bot.tree.command(name="Ù‚ÙÙ„_Ø§Ù„ØµÙˆØ±", description="30. Ù…Ù†Ø¹ Ø§Ù„ØµÙˆØ±")
async def noimg(it: discord.Interaction):
    if not is_boss(it): return
    await it.channel.set_permissions(it.guild.default_role, attach_files=False)
    await it.response.send_message("ğŸš« Ù‚ÙÙ„Ù†Ø§ Ø§Ù„ØµÙˆØ±!")

@bot.tree.command(name="Ù‚ÙÙ„_Ø§Ù„Ø±ÙˆØ§Ø¨Ø·", description="31. Ù…Ù†Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·")
async def nolink(it: discord.Interaction):
    if not is_boss(it): return
    bot.db["guilds"][str(it.guild.id)] = {"nolink": True}
    bot.save_db()
    await it.response.send_message("ğŸš« Ù‚ÙÙ„Ù†Ø§ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·!")

@bot.tree.command(name="ØªÙ†Ø´ÙŠØ·_Ø§Ù„Ø­Ù…Ø§ÙŠØ©", description="32. Ø­Ù…Ø§ÙŠØ©")
async def security(it: discord.Interaction):
    if not is_boss(it): return
    await it.response.send_message("ğŸ›¡ï¸ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø´ØºØ§Ù„Ø©!")

@bot.tree.command(name="Ø³Ø¬Ù„_Ø§Ù„Ø§Ø¯Ø§Ø±Ø©", description="33. Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©")
async def logadmin(it: discord.Interaction):
    if not is_boss(it): return
    await it.response.send_message("ğŸ“œ Ø§Ù„Ø³Ø¬Ù„ Ù…Ø­ÙÙˆØ¸ Ø¯Ø§Ø®Ù„ÙŠØ§Ù‹.")

# --- [ ğŸ’° Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ (16 Ø£Ù…Ø±) ] ---

@bot.tree.command(name="Ø±Ø§ØªØ¨", description="1. Ø±Ø§ØªØ¨")
async def daily(it: discord.Interaction):
    u = get_u(it.user.id); u["pocket"] += 5000; bot.save_db()
    await it.response.send_message("ğŸ’µ Ø®Ø° 5000")

@bot.tree.command(name="Ø±ØµÙŠØ¯", description="2. Ø±ØµÙŠØ¯")
async def bal(it: discord.Interaction):
    u = get_u(it.user.id)
    await it.response.send_message(f"ğŸ’° Ø¬ÙŠØ¨Ùƒ: {u['pocket']} | Ø¨Ù†ÙƒÙƒ: {u['bank']}")

@bot.tree.command(name="ØªØ­ÙˆÙŠÙ„", description="3. ØªØ­ÙˆÙŠÙ„")
async def trans(it: discord.Interaction, user: discord.Member, amt: int):
    u1, u2 = get_u(it.user.id), get_u(user.id)
    if u1["pocket"] < amt: return await it.response.send_message("âŒ Ù…Ø·ÙØ±!")
    u1["pocket"] -= amt; u2["pocket"] += amt; bot.save_db()
    await it.response.send_message(f"âœ… Ø­ÙˆÙ„Ù†Ø§ {amt}")

@bot.tree.command(name="ØªÙˆØ¨_Ø§Ù‚ØªØµØ§Ø¯", description="4. ØªÙˆØ¨")
async def topeco(it: discord.Interaction):
    sorted_u = sorted(bot.db["users"].items(), key=lambda x: x[1]["pocket"], reverse=True)[:5]
    await it.response.send_message(f"ğŸ† ØªÙˆØ¨: \n" + "\n".join([f"<@{k}>: {v['pocket']}" for k,v in sorted_u]))

@bot.tree.command(name="Ù…ØªØ¬Ø±", description="5. Ù…ØªØ¬Ø±")
async def shop(it: discord.Interaction):
    await it.response.send_message("ğŸ›’ Ù…ØªØ¬Ø±: 1- VIP (50000)")

@bot.tree.command(name="Ø´Ø±Ø§Ø¡", description="6. Ø´Ø±Ø§Ø¡")
async def buy(it: discord.Interaction, id: int):
    u = get_u(it.user.id)
    if id == 1 and u["pocket"] >= 50000: u["pocket"] -= 50000; u["inv"].append("VIP"); bot.save_db(); await it.response.send_message("âœ… Ø´Ø±ÙŠØª!")
    else: await it.response.send_message("âŒ Ø±ØµÙŠØ¯Ùƒ!")

@bot.tree.command(name="Ø­Ù‚ÙŠØ¨Ø©", description="7. Ø´Ù†Ø·Ø©")
async def bag(it: discord.Interaction):
    u = get_u(it.user.id)
    await it.response.send_message(f"ğŸ’ Ø¹Ù†Ø¯Ùƒ: {u['inv']}")

@bot.tree.command(name="Ø¹Ù…Ù„", description="8. Ø´ØºÙ„")
async def work(it: discord.Interaction):
    u = get_u(it.user.id); g = random.randint(100, 1000); u["pocket"] += g; bot.save_db()
    await it.response.send_message(f"ğŸ‘· Ø±Ø¨Ø­Øª {g}")

@bot.tree.command(name="Ø³Ø±Ù‚Ø©", description="9. Ø³Ø±Ù‚Ø©")
async def steal(it: discord.Interaction, user: discord.Member):
    u1, u2 = get_u(it.user.id), get_u(user.id)
    if u2["pocket"] < 100: return await it.response.send_message("âŒ Ù…Ø·ÙØ±!")
    s = random.randint(1, 100); u1["pocket"] += s; u2["pocket"] -= s; bot.save_db()
    await it.response.send_message(f"ğŸ˜ˆ Ø³Ø±Ù‚Øª {s}")

@bot.tree.command(name="Ø§Ø³ØªØ«Ù…Ø§Ø±", description="10. Ø§Ø³ØªØ«Ù…Ø§Ø±")
async def invst(it: discord.Interaction, amt: int):
    u = get_u(it.user.id)
    if u["pocket"] < amt: return
    if random.random() > 0.5: u["pocket"] += amt; await it.response.send_message("ğŸ“ˆ Ø±Ø¨Ø­Øª!")
    else: u["pocket"] -= amt; await it.response.send_message("ğŸ“‰ Ø®Ø³Ø±Øª!")
    bot.save_db()

@bot.tree.command(name="Ø¨Ù†Ùƒ", description="11. Ø¥ÙŠØ¯Ø§Ø¹")
async def dep(it: discord.Interaction, amt: int):
    u = get_u(it.user.id)
    if u["pocket"] < amt: return
    u["pocket"] -= amt; u["bank"] += amt; bot.save_db(); await it.response.send_message("ğŸ¦ Ø­Ø·ÙŠÙ†Ø§Ù‡Ù… Ø¨Ø§Ù„Ø¨Ù†Ùƒ")

@bot.tree.command(name="Ø³Ø­Ø¨", description="12. Ø³Ø­Ø¨")
async def wit(it: discord.Interaction, amt: int):
    u = get_u(it.user.id)
    if u["bank"] < amt: return
    u["bank"] -= amt; u["pocket"] += amt; bot.save_db(); await it.response.send_message("ğŸ’µ Ø³Ø­Ø¨Ù†Ø§Ù‡Ù…")

@bot.tree.command(name="Ø­Ø¸", description="13. Ø­Ø¸")
async def luck(it: discord.Interaction):
    r = random.randint(-100, 100); u = get_u(it.user.id); u["pocket"] += r; bot.save_db()
    await it.response.send_message(f"ğŸ² Ø­Ø¸Ùƒ: {r}")

@bot.tree.command(name="Ù…Ù‚Ø§Ù…Ø±Ø©", description="14. Ù‚Ù…Ø§Ø±")
async def gmb(it: discord.Interaction, amt: int):
    u = get_u(it.user.id)
    if u["pocket"] < amt: return
    if random.random() > 0.6: u["pocket"] += amt; m = "ğŸ¤‘"
    else: u["pocket"] -= amt; m = "ğŸ’¸"
    bot.save_db(); await it.response.send_message(m)

@bot.tree.command(name="ØªØ¹Ø¯ÙŠÙ†", description="15. ØªØ¹Ø¯ÙŠÙ†")
async def mine(it: discord.Interaction):
    u = get_u(it.user.id); g = random.randint(10, 100); u["pocket"] += g; bot.save_db(); await it.response.send_message(f"â›ï¸ {g}")

@bot.tree.command(name="Ù‡Ø¨Ø©", description="16. Ù‡Ø¨Ø©")
async def give(it: discord.Interaction, user: discord.Member, amt: int):
    if it.user.id != OWNER_ID: return
    u = get_u(user.id); u["pocket"] += amt; bot.save_db(); await it.response.send_message("ğŸ")

# --- [ ğŸ® ØªØ³Ù„ÙŠØ© ÙˆØ°ÙƒØ§Ø¡ ] ---

@bot.tree.command(name="ask", description="Ø§Ø³Ø£Ù„ Ø°ÙƒØ§Ø¡ Groq")
async def ask(it: discord.Interaction, q: str):
    await it.response.defer()
    try:
        # Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹Ù…Ù„
        c = groq_client.chat.completions.create(model="llama-3.3-70b-versatile", messages=[{"role": "user", "content": q}])
        await it.followup.send(f"âš¡ **Ø§Ù„Ø±Ø¯:**\n{c.choices[0].message.content[:1900]}")
    except:
        await it.followup.send("âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.")

@bot.tree.command(name="Ù„Ùˆ_Ø®ÙŠØ±ÙˆÙƒ", description="Ù„Ø¹Ø¨Ø©")
async def choice(it: discord.Interaction):
    await it.response.send_message(f"ğŸ¤” {random.choice(['ØªØ·ÙŠØ±', 'ØªØ®ØªÙÙŠ'])}")

@bot.tree.command(name="ØµØ±Ø§Ø­Ø©", description="Ù„Ø¹Ø¨Ø©")
async def truth(it: discord.Interaction):
    await it.response.send_message(f"ğŸ’¬ {random.choice(['ØªØ­Ø¨ØŸ', 'ØªØ®Ø§ÙØŸ'])}")

@bot.tree.command(name="Ù…Ø³Ø§Ø¹Ø¯Ø©", description="Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¨ÙˆØª")
async def help_cmd(it: discord.Interaction):
    await it.response.send_message("ğŸ›¡ï¸ Ø¥Ø¯Ø§Ø±Ø© (33) | ğŸ’° Ø§Ù‚ØªØµØ§Ø¯ (16) | ğŸ¤– Ø°ÙƒØ§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ")

# --- [ ğŸ¤– Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ] ---

@bot.event
async def on_message(message):
    if message.author.bot: return

    # Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø±ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø­Ø¯Ø¯
    if message.channel.id in bot.db.get("ai_rooms", []):
        async with message.channel.typing():
            try:
                c = groq_client.chat.completions.create(
                    model="llama-3.3-70b-versatile",
                    messages=[{"role": "user", "content": message.content}]
                )
                await message.reply(c.choices[0].message.content[:1900])
            except:
                pass
        return

    # Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© (Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª)
    if message.content in bot.db.get("responses", {}):
        await message.channel.send(bot.db["responses"][message.content])

    await bot.process_commands(message)

@bot.event
async def on_ready():
    await bot.tree.sync()
    print(f"âœ… {bot.user} Ø¬Ø§Ù‡Ø²! Ù…ÙˆØ¯ÙŠÙ„ Llama 3.3 Ø´ØºØ§Ù„.")

bot.run(TOKEN)
